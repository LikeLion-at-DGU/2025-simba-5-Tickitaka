<!DOCTYPE html>
<html lang="ko">

<<<<<<< HEAD
<head>
    <meta charset="UTF-8">
    <title>ì±„íŒ…ë°©</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .chat-header { border-bottom: 1px solid #ccc; padding-bottom: 10px; margin-bottom: 10px; }
        .chat-box { height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; background-color: #f9f9f9; margin-bottom: 10px; }
        .chat-message.me { text-align: right; background-color: #d0ebff; margin: 5px 0; padding: 8px; border-radius: 10px; display: inline-block; max-width: 70%; }
        .chat-message.other { text-align: left; background-color: #eee; margin: 5px 0; padding: 8px; border-radius: 10px; display: inline-block; max-width: 70%; }
        .chat-input { display: flex; flex-direction: column; gap: 8px; }
        .chat-input input[type="text"] { padding: 6px; width: 100%; }
        .private-info { background-color: #fffbe6; border: 1px solid #aaa; padding: 10px; margin-top: 20px; border-radius: 8px; }
    </style>
</head>

<body>

    <div class="chat-header">
        <h3>ì±„íŒ…ë°© - {{ post.title }}</h3>
        <p>ê±´ë¬¼: {{ post.building.name }} / ì‘ì„±ì: {{ post.master.nickname }}</p>
    </div>

    <div id="chat-box" class="chat-box">
        {% for c in comments %}
            {% if c.writer == me %}
                <div class="chat-message me">
                    ë‚˜: {{ c.content }}
                    {% if c.image %}
                        <div><img src="{{ c.image.url }}" style="max-width: 150px; margin-top:5px;"></div>
                    {% endif %}
                    <span style="font-size: 0.8em;">({{ c.timestamp|date:"H:i" }})</span>
                </div>
            {% else %}
                <div class="chat-message other">
                    {{ c.writer.nickname }}: {{ c.content }}
                    {% if c.image %}
                        <div><img src="{{ c.image.url }}" style="max-width: 150px; margin-top:5px;"></div>
                    {% endif %}
                    <span style="font-size: 0.8em;">({{ c.timestamp|date:"H:i" }})</span>
                </div>
            {% endif %}
        {% empty %}
            <p>ì•„ì§ ì±„íŒ…ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endfor %}
    </div>

    <!-- âœ… í•˜ë‹¨ ì…ë ¥ í¼ (ì‚¬ì§„ ì—…ë¡œë“œ ê°€ëŠ¥) -->
    <form method="POST" enctype="multipart/form-data" action="{% url 'chats:submit_chat' chatroom.id %}" class="chat-input">
        {% csrf_token %}
        <input type="text" name="content" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        <input type="file" name="image" accept="image/*">
        <button type="submit">ë³´ë‚´ê¸°</button>
    </form>

    <button onclick="refreshChat()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>

    {% if post.status == 'in_progress' or post.status == 'done' %}
        <div class="private-info">
            <strong>ğŸ“¦ ë¯¼ê°ì •ë³´</strong><br>
            {{ post.private_info }}
        </div>
    {% endif %}

    <script>
        function refreshChat() {
            fetch(window.location.href)
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const newBox = doc.querySelector('#chat-box');
                    document.querySelector('#chat-box').innerHTML = newBox.innerHTML;
                });
        }
        setInterval(refreshChat, 30000);
    </script>

</body>

</html>
=======
<link rel="stylesheet" href="{% static 'css/chat_room.css' %}" />
<link rel="stylesheet" href="{% static 'css/reset.css' %}">
<div class="pageAlignChatroom_sw">
    <div class="nicknameFrameChatroom_sw">
        <button class="backiconChatroom_sw" >
          <img src="{% static 'images/backicon.svg' %}" alt="ë’¤ë¡œê°€ê¸°ì•„ì´ì½˜">
        </button>
        <div class="profileNicknameChatroom_sw">
            <img class="profileImgChatroom_sw" src="{% static 'images/defaultprofile.svg' %}" alt="í”„ë¡œí•„ì‚¬ì§„">
            <div class="nicknameChatroom_sw">{{opponent.nickname}}</div>
        </div>
        <button class="sirenChatroom_sw">
                <img class="sireniconChatroom_sw" src="{% static 'images/siren.svg' %}" alt="ì‹ ê³ ì•„ì´ì½˜">
                <div class="reportChatroom_sw">ì‹ ê³ í•˜ê¸°</div>
        </button>
    </div>
    <div class="tradeTitleFrameChatroom_sw">
            <div class="tradeTitleImageChatroom_sw"></div>
            <div class="tradeTitleTextFrameChatroom_sw">
                <div class="tradeTitleTextChatroom_sw">{{post.title}}</div>
                <div class="tradeTitleButtonsFrameChatroom_sw">
                    <button class="buttonChatroom_sw">ê±°ë˜ ì‹ ì²­</button>
                    <button class="buttonChatroom_sw">ì™„ë£Œ ìš”ì²­</button>
                </div>
            </div>
    </div>

<!-- ì—¬ê¸°ë¶€í„° ìŠ¤í¬ë¡¤ -->
    <div class="chatBubblesFrameChatroom_sw">
        <div class="firstDescriptionBubbleChatroom_sw">
            <p>ì±„íŒ…ì°½ì€ 30ì´ˆì— í•œë²ˆì”© ìƒˆë¡œê³ ì¹¨ ë©ë‹ˆë‹¤.</p>
            <p>ë¹ ë¥¸ ìƒˆë¡œê³ ì¹¨ì„ ì›í•˜ì‹œë©´ ì…ë ¥ì°½ ì˜¤ë¥¸ìª½ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
        </div>
        <div class="secondDescriptionBubbleChatroom_sw">
            <p>ê±°ë˜ë¥¼ ì›í•˜ì‹œë©´ ë©”ë‰´ì—ì„œ ê±°ë˜ë¥¼ í™•ì •í•´ì£¼ì„¸ìš”.</p>
        </div>
        <!-- ì±„íŒ… ë²„ë¸”ì´ ëœ¨ëŠ” ê³³ -->

    </div>

<!-- ì—¬ê¸°ê¹Œì§€ ìŠ¤í¬ë¡¤ -->

<!-- ì—¬ê¸°ë¶€í„° ì±„íŒ… ì…ë ¥ì°½ì´ê³  ê³ ì • -->
    <div class="chatWriteFrameChatroom_sw">
        <button class="iconWriteChatroom_sw">
            <img src="{% static 'images/photoicon.svg' %}" alt="ì‚¬ì§„ì•„ì´ì½˜">
        </button>
        <div class="chatInputWrapperChatroom_sw">
                <textarea class="chatInputChatroom_sw" placeholder="ë©”ì‹œì§€ ë³´ë‚´ê¸°"></textarea>
                <button class="iconRefreshChatroom_sw">
                    <img src="{% static 'images/reloadicon.svg' %}" alt="ìƒˆë¡œê³ ì¹¨ì•„ì´ì½˜">
                </button>
        </div>
        <button class="iconWriteChatroom_sw">
            <img src="{% static 'images/airplaneicon.svg' %}" alt="ì „ì†¡ì•„ì´ì½˜">
        </button>
    </div>
</div>
<!-- ì—¬ê¸°ì„œë¶€í„° ë¯¼ê°ì •ë³´ ëª¨ë‹¬ -->

<div class="modalBackdropChatroom_sw" id="modalBackdrop_sw" style="display: none;"></div>

<div class="modalChatroom_sw" id="sensitiveModal_sw" style="display: none;">
    <div class="modalTitleBoxChatroom_sw">
        <p class="modalTitleChatroom_sw">ë¯¼ê°ì •ë³´</p>
        <button class="modalBtnChatroom_sw"id="closeModal_sw">
            <img src="{% static 'images/xicon.svg' %}" alt="ì—‘ìŠ¤ì•„ì´ì½˜">
        </button>
    </div>
    <div class="modalTextBoxChatroom_sw">
        <p class="modalTextChatroom_sw">{{post.private_info}}</p>
    </div>
</div>
<!-- ì—¬ê¸°ê¹Œì§€ ëª¨ë‹¬ -->
 
{% endblock %}
{% block scripts %}
<!-- js íŒŒì¼ -->
<script src="{% static 'js/chat_room.js' %}"></script>
{% endblock %}
>>>>>>> 26ed4cb3a72d634a3c3f99b38bd48e81fe6544af
